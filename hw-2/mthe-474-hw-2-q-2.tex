% Provides macros manipulating strings of tokens.
\RequirePackage{xstring}

% Store the jobname as a string with category 11 characters.
\edef\normaljobname{\expandafter\scantokens\expandafter{\jobname\noexpand}}
\StrBetween{\normaljobname}{hw-}{-q}[\homeworknumber]
\StrBehind{\normaljobname}{-q-}[\questionnumber]

\documentclass[
  coursecode={MTHE 474},
  assignmentname={Homework \homeworknumber},
  studentnumber=20053722,
  name={Bryan Hoang},
  11pt,
  % final,
]{
  ltxanswer%
}

\usepackage{bch-style}

\begin{document}
  \begin{questions}
    \setcounter{question}{\questionnumber}
    \addtocounter{question}{-1}
    \question[10]{}
    \begin{solution}
      \begin{proof}
        Let \(P\), \(Q\), and \(R\) be three distributions defined on a common finite alphabet \(\mathcal{X}\). Then starting from the RHS of the equation and applying logarithm identities yields
        \begin{align*}
           &\phantomeq \kldiv*{P}{\frac{P+Q}{2}} + \kldiv*{Q}{\frac{P+Q}{2}} + 2\kldiv*{\frac{P+Q}{2}}{R}                                                                                                                                                                                  \\
           &= \sum_{x\in\mathcal{X}} P(x)\log\frac{P(x)}{\left(\frac{P(x)+Q(x)}{2}\right)} + \sum_{x\in\mathcal{X}} Q(x)\log\frac{P(x)}{\left(\frac{P(x)+Q(x)}{2}\right)} + \cancel{2}\sum_{x\in\mathcal{X}} \frac{P(x)+Q(x)}{\cancel{2}}\log\frac{\left(\frac{P(x)+Q(x)}{2}\right)}{R(x)} \\
           &= \cancel{\sum_{x\in\mathcal{X}} P(x) \log 2} + \cancel{\sum_{x\in\mathcal{X}} P(x) \log P(x)} - \cancel{\sum_{x\in\mathcal{X}} P(x) \log P(x)} - \cancel{\sum_{x\in\mathcal{X}} P(x) \log Q(x)}                                                                               \\
           &\phantomeq + \cancel{\sum_{x\in\mathcal{X}} Q(x) \log 2} + \cancel{\sum_{x\in\mathcal{X}} Q(x) \log Q(x)} - \cancel{\sum_{x\in\mathcal{X}} Q(x) \log P(x)} - \cancel{\sum_{x\in\mathcal{X}} Q(x) \log Q(x)}                                                                    \\
           &\phantomeq + \sum_{x\in\mathcal{X}} P(x) \log P(x) + \cancel{\sum_{x\in\mathcal{X}} P(x) \log Q(x)} - \cancel{\sum_{x\in\mathcal{X}} P(x) \log 2} - \sum_{x\in\mathcal{X}} P(x) \log R(x)                                                                                      \\
           &\phantomeq + \cancel{\sum_{x\in\mathcal{X}} Q(x) \log P(x)} + \sum_{x\in\mathcal{X}} Q(x) \log Q(x) - \cancel{\sum_{x\in\mathcal{X}} Q(x) \log 2} - \sum_{x\in\mathcal{X}} Q(x) \log R(x)                                                                                      \\
           &= \sum_{x\in\mathcal{X}} P(x) \log P(x) - \sum_{x\in\mathcal{X}} P(x) \log R(x) + \sum_{x\in\mathcal{X}} Q(x) \log Q(x) - \sum_{x\in\mathcal{X}} Q(x) \log R(x)                                                                                                                \\
           &= \sum_{x\in\mathcal{X}} P(x) \log \frac{P(x)}{R(x)} + \sum_{x\in\mathcal{X}} Q(x) \log \frac{Q(x)}{R(x)}                                                                                                                                                                      \\
           &= \kldiv{P}{R} + \kldiv{Q}{R}
        \end{align*}
      \end{proof}
    \end{solution}
  \end{questions}
\end{document}
